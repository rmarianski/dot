# Kubernetes aliases - consolidated from ~/.zshrc.local.kubernetes
alias k=kubectl
alias kg="k get"
alias kd="k describe"
alias ke="k edit"
alias kl="k logs"
alias klf="kl -f"
alias klj='f() { kubectl logs -f $1 | jq -Rr ". as \$line | try (fromjson | [.message] | @tsv ) catch \$line" };f'
alias kgp="kg po"
alias kdp="kd po"
alias kga="kg all"
alias kaf="k apply -f"
alias kcc="k config current-context"
alias kcn="k config view --minify | grep namespace | awk '{print \$NF}'"
alias kgd="kg deploy"
alias kdd="kd deploy"
alias ked="ke deploy"
alias kgh="kg hpa"
alias kdh="kd hpa"
alias keh="ke hpa"
alias ktp="k top po"
alias ktn="k top no"
alias kgj="kg job"
alias kgc="kg cronjob"
alias kec="ke cronjob"
alias kdc="kd cronjob"
alias kgs="kg svc"
alias kds="kd svc"
alias kes="ke svc"
alias krs="k rollout status"
alias kdrain="k drain --delete-emptydir-data --ignore-daemonsets"
alias kctx="k ctx"
alias kns="k ns"
alias tkn="k tkn"
alias stern="k stern"

# Kubernetes abbreviations moved to ~/.zsh_abk

# Kubernetes functions
function kimagedeploys() {
    kgd -o json | jq -r '.items[] | .metadata.name + " " + .spec.template.spec.containers[0].image'
}

function kimagedeploy() {
    kgd $1 -o json | jq -r '.metadata.name + " " + .spec.template.spec.containers[0].image'
}
